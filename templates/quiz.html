<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Master - {{ category }}</title>
    <link rel="stylesheet" href="../static/style.css">
</head>
<body>
    <input type="hidden" id="lastResult" value="{{ last_result }}">

    <div class="quiz-container">
        <div class="quiz-header">
            <div class="quiz-info">
                <span class="info-label">Question</span>
                <span class="info-value">{{ question_num }}/{{ total_questions }}</span>
            </div>
            
            <div class="timer-container">
                <svg class="timer-icon" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" fill="none" stroke-width="2"/>
                    <path d="M12 6v6l4 2" stroke="currentColor" fill="none" stroke-width="2"/>
                </svg>
                <span class="timer" id="timer">60</span>
                <span class="timer-label">sec</span>
            </div>
            
            <div class="quiz-info">
                <span class="info-label">Category</span>
                <span class="info-value">{{ category }}</span>
            </div>
        </div>
        
        <div class="progress-bar">
            <div class="progress-fill" style="width:  (question_num / total_questions) * 100 "></div>
        </div>
        
        <div class="question-container">
            <h2 class="question-text">{{ question.question|safe }}</h2>
            
            <form action="/submit_answer" method="POST" id="quizForm" class="options-form">
                <div class="options-grid">
                    {% for i in range(question.options|length) %}
                    <label class="option-label">
                        <input type="radio" name="answer" value="{{ i }}" required class="option-input">
                        <div class="option-box">
                            <span class="option-letter">{{ 'ABCD'[i] }}</span>
                            <span class="option-text">{{ question.options[i]|safe }}</span>
                        </div>
                    </label>
                    {% endfor %}
                </div>
                
                <button type="submit" class="next-btn" id="nextBtn" disabled>
                    <span>{% if question_num < total_questions %}NEXT QUESTION{% else %}FINISH QUIZ{% endif %}</span>
                    <svg class="btn-arrow" viewBox="0 0 24 24">
                        <path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" fill="none" stroke-width="2"/>
                    </svg>
                </button>
            </form>
        </div>
    </div>
    
    <script>
        // Timer Logic
        let timeLeft = 60;
        const timerElement = document.getElementById('timer');
        const timerContainer = document.querySelector('.timer-container');
        const form = document.getElementById('quizForm');
        
        const countdown = setInterval(() => {
            timeLeft--;
            timerElement.textContent = timeLeft;
            if (timeLeft <= 10) {
                timerContainer.classList.add('timer-warning');
            }
            if (timeLeft <= 0) {
                clearInterval(countdown);
                form.submit();
            }
        }, 1000);

        // Next Button Enable Logic
        const options = document.querySelectorAll('.option-input');
        const nextBtn = document.getElementById('nextBtn');
        
        options.forEach(option => {
            option.addEventListener('change', () => {
                nextBtn.disabled = false;
                nextBtn.classList.add('enabled');
            });
        });
    </script>
    <script src="../static/script.js"></script>
</body>
</html>